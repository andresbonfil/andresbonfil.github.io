<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Challenge 1</title>
</head>
<body>
    <header>
        <h1>Challenge Encriptador/Desencriptador</h1>
    </header>

    <main>
        <section>
            <a href="index.html"><img src="images/logo.jpg" alt="logo"></a>
            <textarea name="txtText" id="text" cols="30" rows="9" placeholder="Ingrese el texto aquí"></textarea>
            <div class="botones">
                <button name="btnEncript" id="encript">Encriptar</button>
                <button name="btnDecript" id="decript">Desencriptar</button>
            </div>
        </section>
        <aside>
            <h2>Resultado</h2>
            <div class="resultado" id="result">
                <img src="images/Muñeco.jpg" alt="muñeco" id="muneco">
            </div>
            <button name="btnCopy" id="copy">Copiar</button>
        </aside>
    </main>

    <footer>
        <p>Andrés Bonfil Tapia #challengeonecodificador5</p>
    </footer>

</body>
<script>
    _texto = document.getElementById('text')
    _encriptar = document.getElementById('encript')
    _desencriptar = document.getElementById('decript')
    _copiar = document.getElementById('copy')
    _munieco = document.getElementById('muneco')
    _resultado = document.getElementById('result')

    const encriptar = ()=>{
        const text = _texto.value.toLowerCase()
        let encriptacion = text.replaceAll("e", "enter")
        encriptacion = encriptacion.replaceAll("i", "imes")
        encriptacion = encriptacion.replaceAll("a", "ai")
        encriptacion = encriptacion.replaceAll("o", "ober")
        encriptacion = encriptacion.replaceAll("u", "ufat")
        const node = document.createElement("h4")
        const textnode = document.createTextNode(encriptacion)
        node.appendChild(textnode)
        const element = _resultado.children[0]
        _resultado.replaceChild(node, element)
        _copiar.style.visibility = 'visible'
    }
    
    const desencriptrar = ()=>{
        const text = _texto.value.toLowerCase()
        let desencriptacion = text.replaceAll("enter", "e")
        desencriptacion = desencriptacion.replaceAll("imes", "i")
        desencriptacion = desencriptacion.replaceAll("ai", "a")
        desencriptacion = desencriptacion.replaceAll("ober", "o")
        desencriptacion = desencriptacion.replaceAll("ufat", "u")
        const node = document.createElement("h4")
        const textnode = document.createTextNode(desencriptacion)
        node.appendChild(textnode)
        const element = _resultado.children[0]
        _resultado.replaceChild(node, element)
        _copiar.style.visibility = 'hidden'
    }
    
    const copiar = ()=>{
        let copyText = document.querySelector("h4");
        navigator.clipboard.writeText(copyText.textContent)
        .then(() => {
            console.log('Text copied to clipboard');
        })
        .catch(err => {
            console.error('Error in copying text: ', err);
        });
    }
    _encriptar.addEventListener('click', ()=>{
        encriptar()
    })

    _desencriptar.addEventListener('click', ()=>{
        desencriptrar()
    })

    _copiar.addEventListener('click', ()=>{
        copiar()
    })
</script>
</html>